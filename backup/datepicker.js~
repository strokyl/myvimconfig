angular.module("Ngwis.Directives").directive("mydatepicker", ['$filter',
    function($filter) {
        return {
            restrict: 'E',
            templateUrl : 'template/datepicker.html',
            require : "datepicker-popup",
            scope : {
                inputId : '@',
                date : '=',
                name : '@?',
                format : '@?',
                closeText : '@?',
                initDate : '=?'
            },
            controller : function($scope) {
                $scope.closeText = $scope.closeText || "Fermer";
                $scope._date = $scope.initDate || new Date();
                $scope.format = $scope.format || "yyyy-MM-dd";





                $scope.format = "dfgdfgsdgsdfg";
                    



                console.log("scope.format : ", $scope.format);
                console.log("scope : ", $scope);
                console.log("scope.format : ", $scope.format);

                setInterval(function() {console.log("scope.format" , $scope.format)}, 100);




                $scope.dateOpened = false;

                $scope.$watch("_date", function(newDate, oldDate) {
                    $scope.date = $filter('date')(newDate, format);
                });

                $scope.openDate = function($event) {
                    $event.preventDefault();
                    $event.stopPropagation();
                    $scope.dateOpened = true;
                };

            }
        }
}]);
